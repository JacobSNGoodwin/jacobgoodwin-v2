---
import { GetStaticPaths } from 'astro';
import BlogLayout from '@layouts/BlogLayout.astro';
import { PostFrontmatter } from '@src/types';
import { queryPosts } from '@src/utils/posts';

export const getStaticPaths: GetStaticPaths = async ({ paginate }) => {
  console.log('Building paths for blog tags');

  const allPosts = [...(await Astro.glob<PostFrontmatter>('./posts/*.mdx'))];
  const sortedPosts = queryPosts(allPosts);

  return paginate(sortedPosts, {
    pageSize: parseInt(import.meta.env.POST_PAGE_SIZE),
  });
};

const { page } = Astro.props;
---

<!-- TODO - Post Card -->
<BlogLayout metaTags={{ title: 'JG - Welcome' }}>
  <h1 class="tag-title">Bienvenidos al Blogcito</h1>
  {
    page.data.map((post) => (
      <a href={post.url}>
        <div>
          {post.frontmatter.title} - {post.frontmatter.date}
        </div>
      </a>
    ))
  }
</BlogLayout>

<style lang="css">
  .tag-title {
    text-align: center;
  }
</style>
