---
import { GetStaticPaths, MarkdownInstance, Page } from 'astro';
import BlogLayout from '@layouts/BlogLayout.astro';
import { PostFrontmatter } from '@src/types';
import { queryPosts } from '@src/utils/posts';
import PaginatedPostList from '@src/components/PaginatedPostList.astro';

export type Props = {
  page: Page<MarkdownInstance<PostFrontmatter>>;
};

export const getStaticPaths: GetStaticPaths = async ({ paginate }) => {
  console.log('Building paths for blog tags');

  const allPosts = [...(await Astro.glob<PostFrontmatter>('./posts/*.mdx'))];
  const sortedPosts = queryPosts(allPosts);

  return paginate(sortedPosts, {
    pageSize: parseInt(import.meta.env.POST_PAGE_SIZE),
  });
};

const { page } = Astro.props;
---

<BlogLayout metaTags={{ title: 'JG - Welcome' }}>
  <PaginatedPostList title="All Posts" page={page} />
</BlogLayout>

<style lang="css">
  .tag-title {
    text-align: center;
  }
</style>
